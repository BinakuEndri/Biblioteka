<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="Style/navigation_bar.css" />
    <link rel="stylesheet" href="Style/login.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Login</title>
    <link rel="shortcut icon" type="x-icon" href="Foto/favicon.png" />
  </head>
  <body>
    <div class="main">
      <div class="box">
        <div class="inner-box">
          <div class="forms-wrap">
            <form id="form" action="ballina.html" class="sign-in-form">
              <div class="logo">
                <a href="ballina.html"
                  ><i class="fa-solid fa-book-open-reader"></i>
                </a>
                <h3>biblioteka</h3>
              </div>
              <div class="heading">
                <h2>Mirsevini</h2>
                <h6>Nuk jeni regjistriar ende?</h6>
                <a href="#" class="signup">Regjistrohu</a>
              </div>
              <div class="actual-form">
                <div class="input-wrap">
                  <input
                    type="text"
                    id="name"
                    class="input-field"
                    autocomplete="off"
                  />
                  <label>Emri</label>
                  <div class="error"></div>
                </div>
                <div class="input-wrap">
                  <input
                    type="password"
                    id="password"
                    class="input-field"
                    autocomplete="off"
                  />
                  <label>Fjalekalimi</label>
                  <div class="error"></div>
                </div>

                <button type="submit" class="sign-btn">Kyquni</button>
                <!-- <input type="submit" value="Sign In" class="sign-btn" /> -->

                <p class="text">
                  Keni harruar fjalekalimin apo detajet e hyrjes
                  <a href="#">Merr ndihme</a> per tu kyqur
                </p>
              </div>
            </form>
            <form
              id="form"
              action="ballina.html"
              autocomplete="off"
              class="sign-up-form"
            >
              <div class="logo">
                <a href="ballina.html"
                  ><i class="fa-solid fa-book-open-reader"></i>
                </a>
                <h3>biblioteka</h3>
              </div>
              <div class="heading">
                <h2>Regjistrohini</h2>
                <h6>Veqse jeni i regjistruar?</h6>
                <mark> <a href="#" class="signup">Kyquni</a></mark>
              </div>
              <div class="actual-form">
                <div class="input-wrap">
                  <input
                    type="text"
                    class="input-field"
                    autocomplete="off"
                    id="name"
                  />
                  <label>Emri</label>
                  <div class="error"></div>
                </div>
                <div class="input-wrap">
                  <input
                    type="email"
                    class="input-field"
                    autocomplete="off"
                    id="email"
                  />
                  <label>Email</label>
                  <div class="error"></div>
                </div>
                <div class="input-wrap">
                  <input
                    type="password"
                    id="password"
                    class="input-field"
                    autocomplete="off"
                    minlength="4"
                  />
                  <label>Fjalekalimi</label>
                  <div class="error"></div>
                </div>
                <div class="input-wrap">
                  <input
                    type="password"
                    id="password1"
                    class="input-field"
                    autocomplete="off"
                  />
                  <label>Konfirmo Fjalekalimin</label>
                  <div class="error"></div>
                </div>
                <button type="submit" class="sign-btn">Sign Up</button>
                <!-- <input type="submit" value="Sign Up" class="sign-btn" /> -->

                <p class="text">
                  Duke u regjistruar une pajtohem me
                  <a href="#">Termat e perdorimit</a> dhe
                  <a href="#">Politikat e privatesise</a>
                </p>
              </div>
            </form>
          </div>
          <div class="information"></div>
        </div>
      </div>
    </div>
    <script>
      const inputs = document.querySelectorAll(".input-field");
      const toggle_btn = document.querySelectorAll(".signup");
      const main = document.querySelector(".main");

      inputs.forEach((inp) => {
        inp.addEventListener("focus", () => {
          inp.classList.add("active");
        });
        inp.addEventListener("blur", () => {
          if (inp.value != "") return;
          inp.classList.remove("active");
        });
      });

      toggle_btn.forEach((btn) => {
        btn.addEventListener("click", () => {
          main.classList.toggle("sign-up-mode");
        });
      });

      const name = document.getElementById("name");
      const password = document.getElementById("password");
      const email = document.getElementById("email");
      const password1 = document.getElementById("password1");
      const form = document.getElementById("form");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        validateInputs();
      });

      const isValidEmail = (email) => {
        const re =
          /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
      };

      const setError = (element, message) => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector(".error");

        errorDisplay.innerText = message;
        inputControl.classList.add("error");
        inputControl.classList.remove("success");

        //alert(message);
      };

      const setSuccess = (element) => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector(".error");

        errorDisplay.innerText = "";
        inputControl.classList.add("success");
        inputControl.classList.remove("error");
        //alert(message);
      };

      const validateInputs = () => {
        const nameValue = name.value.trim();
        const passwordValue = password.value.trim();
        const emailValue = email.value.trim();
        const password1Value = password1.value.trim();

        if (nameValue === "") {
          setError(name, "Username is required");
          //setError("Username is required");
        } else {
          setSuccess(name);
        }

        if (emailValue === "") {
          setError(email, "Email is required");
        } else if (!isValidEmail(emailValue)) {
          setError(email, "Provide a valid email address");
        } else {
          setSuccess(email);
        }

        if (passwordValue === "") {
          setError(password, "Passsword is required");
          //setError("Passsword is required");
        } else if (passwordValue.length < 8) {
          setError(password, "Password must be at least 8 character");
          //setError("Password must be at least 8 character");
        } else {
          setSuccess(password);
        }

        if (password1Value === "") {
          setError(password1, "Please confirm your password");
        } else if (password1Value !== passwordValue) {
          setError(password1, "Passwords doesn't match");
        } else {
          setSuccess(password1);
        }
      };
    </script>
  </body>
</html>
